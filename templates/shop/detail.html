 {% extends 'base.html' %}

{% block content %}
<div class="container mt-5 mb-5">
    <div class="row bg-white shadow-lg rounded-4 overflow-hidden border-top border-warning border-5">
        <div class="col-md-6 p-0 bg-light">
            {% if produit.image %}
                <img src="{{ produit.image.url }}" class="w-100 h-100" style="object-fit: cover; min-height: 400px;">
            {% endif %}
        </div>
        <div class="col-md-6 p-5 d-flex flex-column justify-content-center">
            <h1 class="fw-bold text-dark display-5">{{ produit.nom }}</h1>
            <h2 class="text-success fw-bold mb-4">{{ produit.prix }} FCFA</h2>
            <div class="p-4 bg-light rounded-3 mb-4 border-start border-warning border-4">
                <p class="text-secondary fs-5 mb-0">{{ produit.description }}</p>
            </div>
            <div class="d-grid gap-3 d-md-flex">
                <button id="{{ produit.id }}" class="btn ted btn-primary btn-lg px-5 rounded-pill fw-bold">Ajouter au panier</button>
                <a href="{% url 'home' %}" class="btn btn-outline-dark btn-lg px-4 rounded-pill">Retour</a>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    var panier = JSON.parse(localStorage.getItem('panier')) || {};
    function updateBadge() {
        var total = 0;
        for (var x in panier) { total += panier[x]; }
        document.getElementById('panier_badge').innerHTML = total;
    }
    updateBadge();

    $(document).on('click', '.ted', function() {
        var item_id = this.id.toString();
        panier[item_id] = (panier[item_id] || 0) + 1;
        localStorage.setItem('panier', JSON.stringify(panier));
        updateBadge();
    });
</script>
{% endblock %}